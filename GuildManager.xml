<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

    <!-- Main Frame -->
    <Frame name="GuildManagerFrame" parent="UIParent" enableMouse="true" movable="true" frameStrata="MEDIUM" hidden="true">
        <Size>
            <AbsDimension x="920" y="500"/>
        </Size>
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="UIParent" relativePoint="TOPLEFT">
                <Offset>
                    <AbsDimension x="0" y="-100"/>
                </Offset>
            </Anchor>
        </Anchors>

        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>

        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormalLarge">
                    <Anchors>
                        <Anchor point="TOP" relativePoint="TOP">
                            <Offset>
                                <AbsDimension x="0" y="-15"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentMemberCount" inherits="GameFontNormal" text="Test">
                    <Anchors>
                        <Anchor point="BOTTOMLEFT" relativePoint="BOTTOMLEFT">
                            <Offset>
                                <AbsDimension x="20" y="20"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentMemberInfo" inherits="GameFontNormal" text="Test">
                    <Size>
                        <AbsDimension x="180" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
                            <Offset>
                                <AbsDimension x="0" y="15"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <!-- WARRIOR -->
                <FontString name="$parentWarriorCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors>
                        <Anchor point="RIGHT" relativeTo="$parentMemberCount">
                            <Offset>
                                <AbsDimension x="34"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <!-- PALADIN -->
                <FontString name="$parentPaladinCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentWarriorCount" x="48"/></Anchors>
                </FontString>

                <!-- HUNTER -->
                <FontString name="$parentHunterCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentPaladinCount" x="48"/></Anchors>
                </FontString>

                <!-- ROGUE -->
                <FontString name="$parentRogueCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentHunterCount" x="48"/></Anchors>
                </FontString>

                <!-- PRIEST -->
                <FontString name="$parentPriestCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentRogueCount" x="48"/></Anchors>
                </FontString>

                <!-- DEATH KNIGHT -->
                <FontString name="$parentDeathKnightCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentPriestCount" x="48"/></Anchors>
                </FontString>

                <!-- SHAMAN -->
                <FontString name="$parentShamanCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentDeathKnightCount" x="48"/></Anchors>
                </FontString>

                <!-- MAGE -->
                <FontString name="$parentMageCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentShamanCount" x="48"/></Anchors>
                </FontString>

                <!-- WARLOCK -->
                <FontString name="$parentWarlockCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentMageCount" x="48"/></Anchors>
                </FontString>

                <!-- DRUID -->
                <FontString name="$parentDruidCount" inherits="GameFontHighlightSmall" text="0">
                    <Anchors><Anchor point="LEFT" relativeTo="$parentWarlockCount" x="48"/></Anchors>
                </FontString>
            </Layer>
        </Layers>

        <Frames>
            <!-- Close Button -->
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-5" y="-5"/>
                        </Offset>
                    </Anchor>
                </Anchors>
            </Button>

            <!-- Search Box -->
            <EditBox name="$parentSearchBox" autoFocus="false" inherits="InputBoxTemplate">
                <Size>
                    <AbsDimension x="300" y="30"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-45"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <FontString inherits="GameFontNormal"/>
                <TextInsets left="5" right="5" top="3" bottom="3"/>
                <Scripts>
                    <OnTextChanged>
                        if self:HasFocus() then
                            GuildManager:SetSearchText(self:GetText())
                        end
                    </OnTextChanged>
                    <OnEscapePressed>
                        self:ClearFocus()
                    </OnEscapePressed>
                    <OnEnterPressed>
                        self:ClearFocus()
                    </OnEnterPressed>
                </Scripts>
            </EditBox>

            <!-- Refresh Button -->
            <Button name="$parentRefreshButton" inherits="UIPanelButtonTemplate" text="Refresh">
                <Size>
                    <AbsDimension x="100" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentSearchBox" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="20" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:RefreshRoster()
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Show Offline Members Checkbox -->
            <CheckButton name="$parentShowOfflineCheckbox" inherits="UICheckButtonTemplate">
                <Size>
                    <AbsDimension x="24" y="24"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentRefreshButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="20" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnLoad>
                        _G[self:GetName().."Text"]:SetText("Show Offline Members")
                    </OnLoad>
                    <OnClick>
                        GuildManager:ToggleShowOffline(self:GetChecked())
                    </OnClick>
                </Scripts>
            </CheckButton>

            <!-- Add Member Button -->
            <Button name="$parentAddMemberButton" inherits="UIPanelButtonTemplate" text="Add Member">
                <Size>
                    <AbsDimension x="120" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPRIGHT" relativeTo="$parent">
                        <Offset>
                            <AbsDimension x="-20" y="-45"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:ShowAddMemberDialog()
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Class Filter Buttons -->
            <!-- Warrior -->
            <Button name="$parentWarriorButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="RIGHT" relativeTo="$parentMemberCount">
                        <Offset>
                            <AbsDimension x="20" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentWarriorIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("WARRIOR", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Paladin -->
            <Button name="$parentPaladinButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentWarriorButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentPaladinIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("PALADIN", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Hunter -->
            <Button name="$parentHunterButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentPaladinButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentHunterIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("HUNTER", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Rogue -->
            <Button name="$parentRogueButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentHunterButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentRogueIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("ROGUE", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Priest -->
            <Button name="$parentPriestButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentRogueButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentPriestIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("PRIEST", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Death Knight -->
            <Button name="$parentDeathKnightButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentPriestButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentDeathKnightIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("DEATHKNIGHT", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Shaman -->
            <Button name="$parentShamanButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentDeathKnightButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentShamanIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("SHAMAN", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Mage -->
            <Button name="$parentMageButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentShamanButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentMageIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("MAGE", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Warlock -->
            <Button name="$parentWarlockButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentMageButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentWarlockIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("WARLOCK", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Druid -->
            <Button name="$parentDruidButton" enableMouse="true">
                <Size>
                    <AbsDimension x="20" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentWarlockButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="28" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <NormalTexture name="$parentDruidIcon" file="Interface\GLUES\CHARACTERCREATE\UI-CHARACTERCREATE-CLASSES"/>
                <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
                        GuildManager:FilterByClass("DRUID", self)
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Column Headers Frame -->
            <Frame name="$parentHeaderFrame">
                <Size>
                    <AbsDimension x="760" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-85"/>
                        </Offset>
                    </Anchor>
                </Anchors>

                <Frames>
                    <!-- Name Header Button -->
                    <Button name="$parentNameHeader" text="Name" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="160" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("name")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <!-- Level Header Button -->
                    <Button name="$parentLevelHeader" text="L" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="35" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentNameHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("level")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <!-- Class Header Button -->
                    <Button name="$parentClassHeader" text="Class" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="75" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentLevelHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("class")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <!-- Rank Header Button -->
                    <Button name="$parentRankHeader" text="Rank" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="115" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentClassHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("rank")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <!-- Public Note Header Button -->
                    <Button name="$parentNoteHeader" text="Note" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="190" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentRankHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("note")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <!-- Officer Note Header Button -->
                    <Button name="$parentOfficerNoteHeader" text="Officer's Note" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="190" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentNoteHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("officernote")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button name="$parentLastOnlineHeader" text="Last Online" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="100" y="25"/>
                        </Size>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentOfficerNoteHeader" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                GuildManager:SortMembers("lastonline")
                                GuildManager:UpdateHeaderButtons()
                            </OnClick>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame>


            <!-- Scroll Frame for Member List -->
            <ScrollFrame name="GuildManagerScrollFrame" inherits="FauxScrollFrameTemplate">
                <Size>
                    <AbsDimension x="860" y="340"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-115"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnVerticalScroll>
                        FauxScrollFrame_OnVerticalScroll(self, offset, 22, function() GuildManager:SortAndFilterMembers() end)
                    </OnVerticalScroll>
                </Scripts>
            </ScrollFrame>
        </Frames>


        <Scripts>
            <OnLoad>
                GuildManagerFrameTitle:SetText("Guild Manager")
                GuildManager:OnLoad(self)
            </OnLoad>
            <OnEvent>
                GuildManager:OnEvent(event, ...)
            </OnEvent>
            <OnShow>
                GuildManager:RequestGuildRoster()
            </OnShow>
            <OnHide>
                if GuildManagerEditDialog then
                    GuildManagerEditDialog:Hide()
                end
            </OnHide>
            <OnMouseDown>
                self:StartMoving()
            </OnMouseDown>
            <OnMouseUp>
                self:StopMovingOrSizing()
            </OnMouseUp>
        </Scripts>
    </Frame>

    <!-- Virtual Template for Member Entry Rows -->
    <Button name="GuildManagerEntryTemplate" virtual="true" enableMouse="true">
        <Size>
            <AbsDimension x="860" y="22"/>
        </Size>
        <NormalTexture file="Interface\Buttons\UI-Listbox-Highlight2">
            <Color r="0.3" g="0.3" b="0.8" a="0"/>
        </NormalTexture>
        <HighlightTexture file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD"/>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentBG">
                    <Anchors>
                        <Anchor point="TOPLEFT"/>
                        <Anchor point="BOTTOMRIGHT"/>
                    </Anchors>
                    <Color r="0.1" g="0.1" b="0.1" a="0.3"/>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <FontString name="$parentName" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="145" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT">
                            <Offset>
                                <AbsDimension x="5" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentLevel" inherits="GameFontNormalSmall" justifyH="CENTER" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="45" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentName" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="5" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentClass" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="80" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentLevel" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="5" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentRank" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="115" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentClass" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentNote" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="190" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentRank" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentOfficerNote" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="190" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentNote" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentLastOnline" inherits="GameFontNormalSmall" justifyH="LEFT" nonspacewrap="true" maxLines="1">
                    <Size>
                        <AbsDimension x="100" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentOfficerNote" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Scripts>
            <OnLoad>
                self.nameText = _G[self:GetName().."Name"]
                self.levelText = _G[self:GetName().."Level"]
                self.classText = _G[self:GetName().."Class"]
                self.rankText = _G[self:GetName().."Rank"]
                self.noteText = _G[self:GetName().."Note"]
                self.officerNoteText = _G[self:GetName().."OfficerNote"]
                self.lastOnlineText = _G[self:GetName().."LastOnline"]
            </OnLoad>
<!--            <OnClick>-->
<!--                GuildManager:OnEntryClick(self)-->
<!--            </OnClick>-->
            <OnEnter>
                self:GetNormalTexture():SetAlpha(0.3)
            </OnEnter>
            <OnLeave>
                self:GetNormalTexture():SetAlpha(0)
            </OnLeave>
        </Scripts>
    </Button>

    <!-- Member Entry Row Instances -->
    <Button name="GuildManagerEntry1" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry2" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry1" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry3" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry2" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry4" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry3" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry5" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry4" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry6" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry5" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry7" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry6" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry8" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry7" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry9" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry8" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry10" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry9" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry11" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry10" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry12" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry11" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry13" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry12" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry14" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry13" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>
    <Button name="GuildManagerEntry15" parent="GuildManagerScrollFrame" inherits="GuildManagerEntryTemplate">
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="GuildManagerEntry14" relativePoint="BOTTOMLEFT">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
    </Button>

    <!-- Edit Member Dialog -->
    <Frame name="GuildManagerEditDialog" parent="UIParent" enableMouse="true" movable="true" frameStrata="MEDIUM" hidden="true">
        <Size>
            <AbsDimension x="300" y="360"/>
        </Size>
        <Anchors>
            <Anchor relativeTo="GuildManagerFrame" point="TOPRIGHT" relativePoint="TOPRIGHT">
                <Offset>
                    <AbsDimension x="400" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>

        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>

        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormal">
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                                <AbsDimension x="0" y="-15"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <Text>Edit Member</Text>
                </FontString>

                <FontString name="$parentNameLabel" inherits="GameFontNormal" text="Name:">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="20" y="-50"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <FontString name="$parentNameValue" inherits="GameFontHighlight">
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentNameLabel" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="10" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <FontString name="$parentRankLabel" inherits="GameFontNormal" text="Rank:">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="20" y="-75"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <FontString name="$parentRankValue" inherits="GameFontHighlight">
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentRankLabel" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="16" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <FontString name="$parentPublicNoteLabel" inherits="GameFontNormal" text="Note:">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="20" y="-105"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <FontString name="$parentOfficerNoteLabel" inherits="GameFontNormal" text="Officer's Note:">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="20" y="-180"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>

        <Frames>
            <!-- Close Button -->
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-5" y="-5"/>
                        </Offset>
                    </Anchor>
                </Anchors>
            </Button>

            <!-- Add Promote / Demote buttons next to RankValue -->
            <Button name="$parentPromoteButton" inherits="UIPanelButtonTemplate">
                <NormalTexture file="Interface\Buttons\UI-ScrollBar-ScrollUpButton-Up"/>
                <PushedTexture file="Interface\Buttons\UI-ScrollBar-ScrollUpButton-Down"/>
                <DisabledTexture file="Interface\Buttons\UI-ScrollBar-ScrollUpButton-Disabled"/>
                <Size>
                    <AbsDimension x="24" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentRankLabel" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="140" y="8"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:PromoteSelectedMember()
                    </OnClick>
                </Scripts>
            </Button>

            <Button name="$parentDemoteButton" inherits="UIPanelButtonTemplate">
                <NormalTexture file="Interface\Buttons\UI-ScrollBar-ScrollDownButton-Up"/>
                <PushedTexture file="Interface\Buttons\UI-ScrollBar-ScrollDownButton-Down"/>
                <DisabledTexture file="Interface\Buttons\UI-ScrollBar-ScrollDownButton-Disabled"/>
                <Size>
                    <AbsDimension x="24" y="20"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentPromoteButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="-24" y="-16"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:DemoteSelectedMember()
                    </OnClick>
                </Scripts>
            </Button>

            <Frame name="$parentPublicNote">
                <Size>
                    <AbsDimension x="260" y="60"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-120"/>
                        </Offset>
                    </Anchor>
                </Anchors>

                <Frames>
                <!-- ScrollFrame -->
                <ScrollFrame name="$parentScroll"
                            inherits="UIPanelScrollFrameTemplate">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="4" y="-4"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="-28" y="4"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <Backdrop bgFile="Interface\ChatFrame\ChatFrameBackground" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                        <EdgeSize>
                            <AbsValue val="16"/>
                        </EdgeSize>
                        <TileSize>
                            <AbsValue val="16"/>
                        </TileSize>
                        <Color r="0" g="0" b="0" a="0.5"/>
                    </Backdrop>
                    <BackdropColor r="0" g="0" b="0" a="0.25"/>
                    <BackdropBorderColor r="0.6" g="0.6" b="0.6"/>

                    <ScrollChild>
                        <EditBox name="$parentEdit"
                                multiline="true"
                                autoFocus="false">
                            <TextInsets left="5" right="5" top="3" bottom="3"/>
                            <Size>
                                <AbsDimension x="230" y="60"/>
                            </Size>

                            <FontString inherits="GameFontHighlightSmall"/>

                            <Scripts>
                                <OnEscapePressed>
                                    self:ClearFocus();
                                </OnEscapePressed>

                                <OnCursorChanged>
                                    ScrollingEdit_OnCursorChanged(self, x, y, w, h);
                                </OnCursorChanged>

                                <OnUpdate>
                                    ScrollingEdit_OnUpdate(self, elapsed, self:GetParent());
                                </OnUpdate>

                                <OnTextChanged>
                                    ScrollingEdit_OnTextChanged(self, self:GetParent());
                                </OnTextChanged>
                            </Scripts>
                        </EditBox>
                    </ScrollChild>
                </ScrollFrame>
                </Frames>
            </Frame>

            <Frame name="$parentOfficerNote">
                <Size>
                    <AbsDimension x="260" y="60"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-195"/>
                        </Offset>
                    </Anchor>
                </Anchors>

                <Frames>
                <ScrollFrame name="$parentScroll"
                            inherits="UIPanelScrollFrameTemplate">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="4" y="-4"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="-28" y="4"/>
                            </Offset>
                        </Anchor>
                    </Anchors>

                    <Backdrop bgFile="Interface\ChatFrame\ChatFrameBackground" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                        <EdgeSize>
                            <AbsValue val="16"/>
                        </EdgeSize>
                        <TileSize>
                            <AbsValue val="16"/>
                        </TileSize>
                        <Color r="0" g="0" b="0" a="0.5"/>
                    </Backdrop>
                    <BackdropColor r="0" g="0" b="0" a="0.25"/>
                    <BackdropBorderColor r="0.6" g="0.6" b="0.6"/>

                    <ScrollChild>
                        <EditBox name="$parentEdit"
                                multiline="true"
                                autoFocus="false">
                            <TextInsets left="5" right="5" top="3" bottom="3"/>
                            <Size>
                                <AbsDimension x="230" y="60"/>
                            </Size>

                            <FontString inherits="GameFontHighlightSmall"/>

                            <Scripts>
                                <OnEscapePressed>
                                    self:ClearFocus();
                                </OnEscapePressed>

                                <OnCursorChanged>
                                    ScrollingEdit_OnCursorChanged(self, x, y, w, h);
                                </OnCursorChanged>

                                <OnUpdate>
                                    ScrollingEdit_OnUpdate(self, elapsed, self:GetParent());
                                </OnUpdate>

                                <OnTextChanged>
                                    ScrollingEdit_OnTextChanged(self, self:GetParent());
                                </OnTextChanged>
                            </Scripts>
                        </EditBox>
                    </ScrollChild>
                </ScrollFrame>
                </Frames>
            </Frame>

            <!-- Save Button -->
            <Button name="$parentSaveButton" inherits="UIPanelButtonTemplate" text="Save">
                <Size>
                    <AbsDimension x="100" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                            <AbsDimension x="-55" y="55"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:SaveMemberEdit()
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Cancel Button -->
            <Button name="$parentCancelButton" inherits="UIPanelButtonTemplate" text="Cancel">
                <Size>
                    <AbsDimension x="100" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                            <AbsDimension x="55" y="55"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManagerEditDialog:Hide()
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Guild Remove Button -->
            <Button name="$parentRemoveButton" inherits="UIPanelButtonTemplate" text="Remove">
                <Size>
                    <AbsDimension x="100" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                            <AbsDimension x="-55" y="20"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnLoad>
                        self:GetFontString():SetTextColor(1.0, 0.0, 0.0, 1)
                    </OnLoad>
                    <OnClick>
                        GuildManager:RemoveMemberFromGuild()
                    </OnClick>
                </Scripts>
            </Button>

            <!-- Group Invite Button -->
            <Button name="$parentInviteButton" inherits="UIPanelButtonTemplate" text="Invite">
                <Size>
                    <AbsDimension x="100" y="25"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                            <AbsDimension x="55" y="20"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        GuildManager:InviteMemberToGroup()
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>

        <Scripts>
            <OnMouseDown>
                self:StartMoving()
            </OnMouseDown>
            <OnMouseUp>
                self:StopMovingOrSizing()
            </OnMouseUp>
        </Scripts>
    </Frame>
</Ui>

